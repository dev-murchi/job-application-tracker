<div class="max-w-4xl mx-auto flex flex-col space-y-6">

  <div class="card rounded-lg shadow-md">

    <div class="px-4 py-6 border-b border-[var(--color-border-default)]">
      <h2 class="text-xl md:text-2xl font-medium text-primary">Profile</h2>
      <div class="flex items-start mt-8 gap-x-4">
        <img [src]="currentUser()?.avatar ?? defaultAvatar" alt="Profile Picture"
          class="size-20 rounded-lg object-cover" />
        <div>
          <h3 class="text-md md:text-lg font-medium text-primary">{{currentUser()?.name}} {{currentUser()?.lastName}}
          </h3>
        </div>
      </div>
    </div>

    <div class="px-4 py-6">
      <form [formGroup]="profileForm" (submit)="updateProfile();" (reset)="resetForm($event)">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-12">
          <div>
            <app-input [form]="profileForm" [inputElement]="firstNameIput" />
          </div>
          <div>
            <app-input [form]="profileForm" [inputElement]="lastNameIput" />
          </div>
          <div>
            <app-input [form]="profileForm" [inputElement]="emailInput" />
          </div>
          <div>
            <app-input [form]="profileForm" [inputElement]="locationIput" />
          </div>
        </div>

        <div class="flex flex-col sm:flex-row justify-end items-center gap-4">
          @if (editMode()) {
          <div class="w-full sm:w-auto">
            <button type="reset"
              class="w-full flex flex-row justify-center items-center gap-2 px-3 py-2 cursor-pointer rounded-lg border border-[var(--color-border-default)] text-[var(--color-text-secondary)] hover:bg-[var(--color-bg-active)] font-medium shadow-md transition-all duration-300 ease-in-out">
              <app-svg [svgName]="cancelIcon" [class]="'h-5 w-5'" fill="currentColor" />
              Cancel
            </button>
          </div>
          <app-submit-button [icon]="sendIcon" text="Update Profile" [isDisabled]="profileForm.invalid || profileForm.pristine"
            class="w-full sm:w-auto" />
          }
          @else {
          <div class="w-full sm:w-auto">
            <button type="button" (click)="enableFormEditing()"
              class="w-full flex flex-row justify-center items-center gap-2 px-3 py-2 cursor-pointer rounded-lg bg-[var(--color-brand-primary)] text-[var(--color-text-on-brand)] hover:bg-[var(--color-brand-hover)] font-medium shadow-md transition-all duration-300 ease-in-out">
              <app-svg [svgName]="editIcon" [class]="'h-5 w-5'" fill="currentColor" />
              Edit Profile
            </button>
          </div>
          }
        </div>
      </form>
    </div>
  </div>
</div>