<div class="card max-w-4xl mx-auto  rounded-lg flex flex-col ">

  <div class="flex justify-between items-end my-8 block">
    <h2 class="text-xl md:text-2xl font-medium text-primary">Profile</h2>
    <button type="button" (click)="enableForm()"
      class="flex items-center pl-2 pr-4 py-1 gap-x-2 bg-emerald-500 text-white cursor-pointer rounded-lg hover:bg-emerald-600 focus:outline-none">
      <app-svg [svgName]="editIcon" [class]="'h-4 w-4'" fill="currentColor" />
      Edit
    </button>
  </div>

  <div class="flex items-start my-8 gap-x-4">
    <img [src]="currentUser()?.avatar ?? defaultAvatar" alt="Profile Picture"
      class="size-20 rounded-lg object-cover" />
    <div>
      <h3 class="text-md md:text-lg font-medium text-primary">{{currentUser()?.name}} {{currentUser()?.lastName}}</h3>
    </div>
  </div>

  <div class="h-px bg-[var(--color-brand-accent)] mb-8"></div>

  <form [formGroup]="profileForm" (submit)="updateProfile();" (reset)="resetForm($event)">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-12">
      <div>
        <app-input label="First Name" type="text" inputId="firstName" [control]="firstNameControl"
          placeholder="First Name" [required]="true" />
      </div>
      <div>
        <app-input label="Last Name" type="text" inputId="lastName" [control]="lastNameControl" placeholder="Last Name"
          [required]="true" />
      </div>

      <div>
        <app-input label="Email Address" type="email" inputId="email" [control]="emailControl"
          placeholder="you@example.com" [required]="true" />
      </div>

      <div>
        <app-input label="Location" type="text" inputId="location" [control]="locationControl" placeholder="TX, USB"
          [required]="true" />
      </div>

    </div>

    @if(editMode()) {
    <div class="max-w-xs grid grid-cols-2 gap-6 justify-end ml-auto">
      <button type="submit" class="flex flex-row w-full 
          justify-center items-center 
          gap-2 px-2 py-2 
          cursor-pointer 
          rounded-lg
          text-[var(--color-text-on-brand)]
          bg-[var(--color-brand-primary)]
          hover:bg-[var(--color-brand-hover)]
          disabled:bg-[var(--color-brand-disabled)] 
          disabled:cursor-not-allowed 
          font-medium 
          shadow-md 
          transform transition-all duration-300 ease-in-out">
        <app-svg [svgName]="sendIcon" [class]="'h-5 w-5 mr-2 text-[var(--color-text-on-brand)]'" fill="currentColor" />
        Send
      </button>

      <button type="button" (click)="resetForm($event)"
        class="flex flex-row w-full justify-center items-center gap-2 px-2 py-2 cursor-pointer rounded-md bg-sky-500 text-white hover:bg-sky-600 disabled:bg-sky-900 disabled:cursor-not-allowed font-medium shadow-md transform transition-all duration-300 ease-in-out">
        <app-svg [svgName]="cancelIcon" [class]="'h-5 w-5 text-white'" fill="currentColor" />
        Cancel
      </button>
    </div>
    }

  </form>
</div>